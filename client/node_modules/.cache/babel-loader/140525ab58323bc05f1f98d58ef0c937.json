{"ast":null,"code":"import _regeneratorRuntime from\"/Users/asl/PROJECTS/simply-vegan/simply-vegan-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/asl/PROJECTS/simply-vegan/simply-vegan-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import config from'../config';import{setAlert}from'./alert';import{GET_POSTS,GET_POST,DELETE_POST,ADD_POST,UPDATE_LIKES,POST_ERROR,ADD_COMMENT,DELETE_COMMENT}from'./types';export var getPosts=function getPosts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(config.apiUrl,\"/posts\"));case 3:res=_context.sent;dispatch({type:GET_POSTS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getPost=function getPost(postId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(config.apiUrl,\"/posts/\").concat(postId));case 3:res=_context2.sent;dispatch({type:GET_POST,payload:res.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var deletePost=function deletePost(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"\".concat(config.apiUrl,\"/posts/\").concat(id));case 3:dispatch({type:DELETE_POST,payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var addPost=function addPost(formData){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post(\"\".concat(config.apiUrl,\"/posts\"),formData,config.apiConfig);case 3:res=_context4.sent;dispatch({type:ADD_POST,payload:res.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var addLike=function addLike(postId){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.put(\"\".concat(config.apiUrl,\"/posts/like/\").concat(postId));case 3:res=_context5.sent;dispatch({type:UPDATE_LIKES,payload:res.data});_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var removeLike=function removeLike(postId){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.put(\"\".concat(config.apiUrl,\"/posts/unlike/\").concat(postId));case 3:res=_context6.sent;dispatch({type:UPDATE_LIKES,payload:res.data});_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[0,7]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var deleteComment=function deleteComment(postId,commentId){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios.delete(\"\".concat(config.apiUrl,\"/posts/comment/\").concat(postId,\"/\").concat(commentId));case 3:dispatch({type:DELETE_COMMENT,payload:commentId});_context7.next=9;break;case 6:_context7.prev=6;_context7.t0=_context7[\"catch\"](0);dispatch({type:POST_ERROR,payload:{msg:_context7.t0.response.statusText,status:_context7.t0.response.status}});case 9:case\"end\":return _context7.stop();}}},_callee7,null,[[0,6]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var addComment=function addComment(postId,formData){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.post(\"\".concat(config.apiUrl,\"/posts/comment/\").concat(postId),formData,config.apiConfig);case 3:res=_context8.sent;dispatch({type:ADD_COMMENT,payload:res.data});_context8.next=11;break;case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](0);console.log(_context8.t0.response);dispatch({type:POST_ERROR,payload:{msg:_context8.t0.response.statusText,status:_context8.t0.response.status}});case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,7]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/asl/PROJECTS/simply-vegan/simply-vegan-frontend/src/actions/post.js"],"names":["axios","config","setAlert","GET_POSTS","GET_POST","DELETE_POST","ADD_POST","UPDATE_LIKES","POST_ERROR","ADD_COMMENT","DELETE_COMMENT","getPosts","dispatch","get","apiUrl","res","type","payload","data","msg","response","statusText","status","getPost","postId","deletePost","id","delete","addPost","formData","post","apiConfig","addLike","put","removeLike","deleteComment","commentId","addComment","console","log"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport config from '../config'\nimport { setAlert } from './alert'\nimport {\n    GET_POSTS,\n    GET_POST,\n    DELETE_POST,\n    ADD_POST,\n    UPDATE_LIKES,\n    POST_ERROR,\n    ADD_COMMENT,\n    DELETE_COMMENT,\n} from './types'\n\n\nexport const getPosts = () => async (dispatch) => {\n    try {\n\n        const res = await axios.get(`${config.apiUrl}/posts`)\n\n        dispatch({\n            type: GET_POSTS,\n            payload: res.data\n        })\n\n    } catch (err) {\n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\nexport const getPost = postId => async dispatch => {\n\n    try {\n        const res = await axios.get(`${config.apiUrl}/posts/${postId}`)\n\n        dispatch({\n            type: GET_POST,\n            payload: res.data\n        })\n\n    } catch (err) {\n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        });\n    }\n}\n\nexport const deletePost = id => async (dispatch) => {\n    try {\n\n        await axios.delete(`${config.apiUrl}/posts/${id}`)\n\n        dispatch({\n            type: DELETE_POST,\n            payload: id\n        })\n        \n    } catch (err) {\n        \n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n\n    }\n}\n\nexport const addPost = formData => async (dispatch) => {\n    try {\n\n        const res = await axios.post(`${config.apiUrl}/posts`, formData, config.apiConfig)\n\n        dispatch({\n            type: ADD_POST,\n            payload: res.data\n        })\n        \n    } catch (err) {\n        \n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n\n    }\n}\n\nexport const addLike = postId => async (dispatch) => {\n    try {\n\n        const res = await axios.put(`${config.apiUrl}/posts/like/${postId}`)\n\n        dispatch({\n            type: UPDATE_LIKES,\n            payload: res.data\n        })\n\n    } catch (err) {\n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\nexport const removeLike = postId => async (dispatch) => {\n    try {\n\n        const res = await axios.put(`${config.apiUrl}/posts/unlike/${postId}`)\n\n        dispatch({\n            type: UPDATE_LIKES,\n            payload: res.data\n        })\n\n    } catch (err) {\n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\nexport const deleteComment = (postId, commentId) => async (dispatch) => {\n    try {\n        \n        await axios.delete(`${config.apiUrl}/posts/comment/${postId}/${commentId}`)\n\n        dispatch({\n            type: DELETE_COMMENT,\n            payload: commentId\n        })\n\n    } catch (err) {\n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\nexport const addComment = (postId, formData) => async (dispatch) => {\n    try {\n        const res = await axios.post(`${config.apiUrl}/posts/comment/${postId}`, formData, config.apiConfig)\n    \n        dispatch({\n            type: ADD_COMMENT,\n            payload: res.data\n        })\n    \n    } catch (err) {\n        console.log(err.response)\n        dispatch({\n            type: POST_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}