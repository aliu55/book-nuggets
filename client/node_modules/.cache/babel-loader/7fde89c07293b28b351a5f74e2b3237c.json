{"ast":null,"code":"import _regeneratorRuntime from\"/Users/asl/PROJECTS/simply-vegan/simply-vegan-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/asl/PROJECTS/simply-vegan/simply-vegan-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import config from'../config';import{setAlert}from'./alert';import{GET_BOOKS,GET_BOOK,BOOK_ERROR,ADD_BOOK,DELETE_BOOK,ADD_NOTE,DELETE_NOTE}from'./types';// book\nexport var getBooks=function getBooks(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(config.apiUrl,\"/books\"));case 3:res=_context.sent;dispatch({type:GET_BOOKS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:BOOK_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getBook=function getBook(bookId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(config.apiUrl,\"/books/\").concat(bookId));case 3:res=_context2.sent;dispatch({type:GET_BOOK,payload:res.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:BOOK_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var deleteBook=function deleteBook(bookId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"\".concat(config.apiUrl,\"/books/\").concat(bookId));case 3:dispatch({type:DELETE_BOOK,payload:bookId});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);dispatch({type:BOOK_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var addBook=function addBook(formData){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res,errors;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post(\"\".concat(config.apiUrl,\"/books\"),formData,config.apiConfig);case 3:res=_context4.sent;dispatch({type:ADD_BOOK,payload:res.data});_context4.next=12;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);errors=_context4.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:BOOK_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};// note \nexport var addNote=function addNote(bookId,formData){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res,errors;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.post(\"\".concat(config.apiUrl,\"/books/notes/\").concat(bookId),formData,config.apiConfig);case 3:res=_context5.sent;dispatch({type:ADD_NOTE,payload:res.data});_context5.next=12;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:BOOK_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var deleteNote=function deleteNote(bookId,noteId){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:try{axios.delete(\"\".concat(config.apiUrl,\"/books/notes/\").concat(bookId,\"/\").concat(noteId));dispatch({type:DELETE_NOTE,payload:noteId});}catch(err){dispatch({type:BOOK_ERROR,payload:{msg:err.response.statusText,status:err.response.status}});}case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/asl/PROJECTS/simply-vegan/simply-vegan-frontend/src/actions/book.js"],"names":["axios","config","setAlert","GET_BOOKS","GET_BOOK","BOOK_ERROR","ADD_BOOK","DELETE_BOOK","ADD_NOTE","DELETE_NOTE","getBooks","dispatch","get","apiUrl","res","type","payload","data","msg","response","statusText","status","getBook","bookId","deleteBook","delete","addBook","formData","post","apiConfig","errors","forEach","error","addNote","deleteNote","noteId","err"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport config from '../config'\nimport { setAlert } from './alert'\nimport {\n    GET_BOOKS,\n    GET_BOOK,\n    BOOK_ERROR,\n    ADD_BOOK,\n    DELETE_BOOK,\n    ADD_NOTE,\n    DELETE_NOTE,\n} from './types'\n\n// book\nexport const getBooks = () => async (dispatch) => {\n    try {\n\n        const res = await axios.get(`${config.apiUrl}/books`)\n\n        dispatch({\n            type: GET_BOOKS,\n            payload: res.data\n        })\n\n    } catch (err) {\n        dispatch({\n            type: BOOK_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\nexport const getBook = bookId => async (dispatch) => {\n    try {\n\n        const res = await axios.get(`${config.apiUrl}/books/${bookId}`)\n\n        dispatch({\n            type: GET_BOOK,\n            payload: res.data\n        })\n\n    } catch (err) {\n        dispatch({\n            type: BOOK_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status }\n        })\n    }\n}\n\nexport const deleteBook = bookId => async (dispatch) => {\n    try {\n        \n        await axios.delete(`${config.apiUrl}/books/${bookId}`)\n\n        dispatch({\n            type: DELETE_BOOK,\n            payload: bookId\n        })\n\n    } catch (err) {\n        dispatch({\n            type: BOOK_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status}\n        })\n    }\n}\n\nexport const addBook = formData => async (dispatch) => {\n    try {\n\n        const res = await axios.post(`${config.apiUrl}/books`, formData, config.apiConfig)\n    \n        dispatch({\n            type: ADD_BOOK,\n            payload: res.data\n        })\n        \n    } catch (err) {\n        \n        const errors = err.response.data.errors\n\n        if (errors) {\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')))\n        }\n\n        dispatch({\n            type: BOOK_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status}\n        })\n    }\n\n}\n\n// note \nexport const addNote = (bookId, formData) => async (dispatch) => {\n    try {\n\n        const res = await axios.post(`${config.apiUrl}/books/notes/${bookId}`, formData, config.apiConfig)\n\n        dispatch({\n            type: ADD_NOTE,\n            payload: res.data\n        })\n        \n    } catch (err) {\n                \n        const errors = err.response.data.errors\n\n        if (errors) {\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')))\n        }\n\n        dispatch({\n            type: BOOK_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status}\n        })\n\n    }\n}\n\nexport const deleteNote = (bookId, noteId) => async (dispatch) => {\n    try {\n\n        axios.delete(`${config.apiUrl}/books/notes/${bookId}/${noteId}`)\n\n        dispatch({\n            type: DELETE_NOTE,\n            payload: noteId\n        })\n        \n    } catch (err) {\n\n        dispatch({\n            type: BOOK_ERROR,\n            payload: { msg: err.response.statusText, status: err.response.status}\n        })\n\n    }\n}"]},"metadata":{},"sourceType":"module"}